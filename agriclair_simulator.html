<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulateur Fiscal - AgriClair</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Inter:wght@400;500;600;700&display=swap');
        
        :root {
            --green-primary: #2d5016;
            --green-light: #5a8f3a;
            --green-accent: #7cb342;
            --cream: #faf8f3;
            --sand: #e8e4d9;
            --brown: #4a3f35;
            --gold: #d4af37;
            --blue: #4a90e2;
            --red: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--cream);
            color: var(--brown);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--sand);
        }
        
        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 900;
            color: var(--green-primary);
        }
        
        .logo::before {
            content: 'üåæ ';
        }
        
        .breadcrumb {
            color: #666;
            font-size: 0.95rem;
        }
        
        .breadcrumb a {
            color: var(--green-primary);
            text-decoration: none;
        }
        
        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            color: var(--green-primary);
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 3rem;
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 450px 1fr;
            gap: 2.5rem;
            align-items: start;
        }
        
        .input-panel {
            background: white;
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            position: sticky;
            top: 2rem;
        }
        
        .input-panel h2 {
            font-family: 'Playfair Display', serif;
            color: var(--green-primary);
            font-size: 1.8rem;
            margin-bottom: 2rem;
        }
        
        .form-group {
            margin-bottom: 1.8rem;
        }
        
        label {
            display: block;
            font-weight: 600;
            color: var(--brown);
            margin-bottom: 0.6rem;
            font-size: 0.95rem;
        }
        
        input[type="number"],
        select {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--sand);
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s;
            background: var(--cream);
        }
        
        input:focus,
        select:focus {
            outline: none;
            border-color: var(--green-accent);
            background: white;
        }
        
        .input-suffix {
            position: relative;
        }
        
        .input-suffix input {
            padding-right: 3rem;
        }
        
        .input-suffix::after {
            content: '‚Ç¨';
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
            font-weight: 600;
        }
        
        .btn-calculate {
            width: 100%;
            padding: 1.2rem;
            background: var(--green-primary);
            color: white;
            border: none;
            border-radius: 35px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1.5rem;
        }
        
        .btn-calculate:hover {
            background: var(--green-light);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(45, 80, 22, 0.3);
        }
        
        .results-panel {
            display: grid;
            gap: 2rem;
        }
        
        .comparison-card {
            background: white;
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            border-left: 6px solid var(--green-accent);
            transition: all 0.3s;
        }
        
        .comparison-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.12);
        }
        
        .regime-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--sand);
        }
        
        .regime-header h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--green-primary);
        }
        
        .best-choice {
            background: var(--green-accent);
            color: white;
            padding: 0.5rem 1.2rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .metric-box {
            background: var(--cream);
            padding: 1.5rem;
            border-radius: 12px;
        }
        
        .metric-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--green-primary);
        }
        
        .metric-value.negative {
            color: var(--red);
        }
        
        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }
        
        .pro-list,
        .con-list {
            background: var(--cream);
            padding: 1.5rem;
            border-radius: 12px;
        }
        
        .pro-list h4 {
            color: var(--green-accent);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .con-list h4 {
            color: var(--red);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .pro-list ul,
        .con-list ul {
            list-style: none;
        }
        
        .pro-list li,
        .con-list li {
            padding: 0.5rem 0;
            font-size: 0.95rem;
            color: #666;
        }
        
        .pro-list li::before {
            content: '‚úì ';
            color: var(--green-accent);
            font-weight: bold;
        }
        
        .con-list li::before {
            content: '‚úó ';
            color: var(--red);
            font-weight: bold;
        }
        
        .summary-card {
            background: linear-gradient(135deg, var(--green-primary) 0%, var(--green-light) 100%);
            color: white;
            padding: 3rem;
            border-radius: 20px;
            margin-top: 2rem;
        }
        
        .summary-card h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .summary-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 1.5rem;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .summary-item h4 {
            font-size: 0.95rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }
        
        .summary-item .value {
            font-size: 2rem;
            font-weight: 700;
        }
        
        .info-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-left: 4px solid var(--blue);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 2rem 0;
        }
        
        .info-box h4 {
            color: var(--blue);
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .info-box p {
            color: #555;
            line-height: 1.6;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-left: 4px solid var(--gold);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
        }
        
        .warning-box h4 {
            color: #856404;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .input-panel {
                position: static;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">AgriClair</div>
            <div class="breadcrumb">
                <a href="agriclair_landing.html">Accueil</a> / <a href="#">Simulateurs</a> / Fiscal
            </div>
        </header>
        
        <h1>Simulateur Fiscal Agricole</h1>
        <p class="subtitle">Comparez les diff√©rents r√©gimes fiscaux et identifiez celui qui optimise votre situation</p>
        
        <div class="main-grid">
            <!-- Input Panel -->
            <div class="input-panel">
                <h2>Votre situation</h2>
                
                <div class="form-group">
                    <label for="ca">Chiffre d'affaires annuel</label>
                    <div class="input-suffix">
                        <input type="number" id="ca" value="120000" min="0" step="1000">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="charges">Charges d√©ductibles</label>
                    <div class="input-suffix">
                        <input type="number" id="charges" value="45000" min="0" step="1000">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="quotientFamilial">Nombre de parts fiscales</label>
                    <select id="quotientFamilial">
                        <option value="1">1 part (c√©libataire)</option>
                        <option value="1.5">1,5 parts (c√©libataire + 1 enfant)</option>
                        <option value="2" selected>2 parts (couple)</option>
                        <option value="2.5">2,5 parts (couple + 1 enfant)</option>
                        <option value="3">3 parts (couple + 2 enfants)</option>
                        <option value="3.5">3,5 parts (couple + 3 enfants)</option>
                        <option value="4">4 parts (couple + 4 enfants)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="autresRevenus">Autres revenus du foyer</label>
                    <div class="input-suffix">
                        <input type="number" id="autresRevenus" value="0" min="0" step="1000">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="situation">Type d'exploitation</label>
                    <select id="situation">
                        <option value="individuelle">Exploitation individuelle</option>
                        <option value="earl" selected>EARL</option>
                        <option value="gaec">GAEC</option>
                        <option value="scea">SCEA</option>
                    </select>
                </div>
                
                <button class="btn-calculate" onclick="calculate()">Calculer et comparer</button>
                
                <div class="info-box" style="margin-top: 2rem;">
                    <h4>‚ÑπÔ∏è Information</h4>
                    <p>Ces simulations sont bas√©es sur les bar√®mes fiscaux 2026. Elles sont donn√©es √† titre indicatif et ne se substituent pas √† un conseil personnalis√©.</p>
                </div>
            </div>
            
            <!-- Results Panel -->
            <div class="results-panel" id="results">
                <!-- Results will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        function calculate() {
            const ca = parseFloat(document.getElementById('ca').value);
            const charges = parseFloat(document.getElementById('charges').value);
            const parts = parseFloat(document.getElementById('quotientFamilial').value);
            const autresRevenus = parseFloat(document.getElementById('autresRevenus').value);
            
            const benefice = ca - charges;
            
            // Calcul Micro-BA
            const microBA = calculateMicroBA(ca, parts, autresRevenus);
            
            // Calcul R√©el Simplifi√©
            const reelSimplifie = calculateReelSimplifie(benefice, parts, autresRevenus);
            
            // Calcul R√©el Normal
            const reelNormal = calculateReelNormal(benefice, parts, autresRevenus);
            
            // D√©terminer le meilleur choix
            const regimes = [
                { name: 'Micro-BA', data: microBA },
                { name: 'R√©el Simplifi√©', data: reelSimplifie },
                { name: 'R√©el Normal', data: reelNormal }
            ];
            
            const bestRegime = regimes.reduce((prev, current) => 
                (prev.data.totalTax < current.data.totalTax) ? prev : current
            );
            
            // Afficher les r√©sultats
            displayResults(microBA, reelSimplifie, reelNormal, bestRegime.name);
        }
        
        function calculateMicroBA(ca, parts, autresRevenus) {
            // Plafond Micro-BA : 91 900‚Ç¨ (2026)
            const plafond = 91900;
            const eligible = ca <= plafond;
            
            if (!eligible) {
                return {
                    eligible: false,
                    revenuImposable: 0,
                    impotRevenu: 0,
                    cotisationsSociales: 0,
                    totalTax: 0
                };
            }
            
            // Abattement forfaitaire de 87%
            const revenuImposable = ca * 0.13;
            const revenuTotal = revenuImposable + autresRevenus;
            
            // Calcul IR
            const impotRevenu = calculateIR(revenuTotal, parts);
            
            // Cotisations sociales MSA (environ 11% du CA en micro)
            const cotisationsSociales = ca * 0.11;
            
            return {
                eligible: true,
                ca: ca,
                revenuImposable: revenuImposable,
                impotRevenu: impotRevenu,
                cotisationsSociales: cotisationsSociales,
                totalTax: impotRevenu + cotisationsSociales
            };
        }
        
        function calculateReelSimplifie(benefice, parts, autresRevenus) {
            const revenuTotal = benefice + autresRevenus;
            
            // Calcul IR
            const impotRevenu = calculateIR(revenuTotal, parts);
            
            // Cotisations sociales MSA (environ 45% du b√©n√©fice)
            const cotisationsSociales = benefice * 0.45;
            
            return {
                eligible: true,
                benefice: benefice,
                revenuImposable: benefice,
                impotRevenu: impotRevenu,
                cotisationsSociales: cotisationsSociales,
                totalTax: impotRevenu + cotisationsSociales
            };
        }
        
        function calculateReelNormal(benefice, parts, autresRevenus) {
            // Identique au r√©el simplifi√© pour le calcul fiscal
            // Diff√©rence : obligations comptables plus lourdes
            const revenuTotal = benefice + autresRevenus;
            
            const impotRevenu = calculateIR(revenuTotal, parts);
            const cotisationsSociales = benefice * 0.45;
            
            return {
                eligible: true,
                benefice: benefice,
                revenuImposable: benefice,
                impotRevenu: impotRevenu,
                cotisationsSociales: cotisationsSociales,
                totalTax: impotRevenu + cotisationsSociales,
                fraisComptabilite: 2500 // Co√ªt comptable plus √©lev√©
            };
        }
        
        function calculateIR(revenu, parts) {
            // Bar√®me IR 2026 (simplifi√©)
            const quotient = revenu / parts;
            let impot = 0;
            
            if (quotient <= 11294) {
                impot = 0;
            } else if (quotient <= 28797) {
                impot = (quotient - 11294) * 0.11;
            } else if (quotient <= 82341) {
                impot = (28797 - 11294) * 0.11 + (quotient - 28797) * 0.30;
            } else if (quotient <= 177106) {
                impot = (28797 - 11294) * 0.11 + (82341 - 28797) * 0.30 + (quotient - 82341) * 0.41;
            } else {
                impot = (28797 - 11294) * 0.11 + (82341 - 28797) * 0.30 + 
                        (177106 - 82341) * 0.41 + (quotient - 177106) * 0.45;
            }
            
            return Math.max(0, impot * parts);
        }
        
        function displayResults(microBA, reelSimplifie, reelNormal, bestChoice) {
            const resultsDiv = document.getElementById('results');
            
            let html = '';
            
            // Micro-BA Card
            if (microBA.eligible) {
                html += `
                <div class="comparison-card">
                    <div class="regime-header">
                        <h3>Micro-BA (Micro-B√©n√©fices Agricoles)</h3>
                        ${bestChoice === 'Micro-BA' ? '<span class="best-choice">üèÜ Meilleur choix</span>' : ''}
                    </div>
                    
                    <div class="metrics-grid">
                        <div class="metric-box">
                            <div class="metric-label">Revenu imposable</div>
                            <div class="metric-value">${formatNumber(microBA.revenuImposable)}‚Ç¨</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Imp√¥t sur le revenu</div>
                            <div class="metric-value">${formatNumber(microBA.impotRevenu)}‚Ç¨</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Cotisations MSA</div>
                            <div class="metric-value">${formatNumber(microBA.cotisationsSociales)}‚Ç¨</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Total charges fiscales/sociales</div>
                            <div class="metric-value">${formatNumber(microBA.totalTax)}‚Ç¨</div>
                        </div>
                    </div>
                    
                    <div class="pros-cons">
                        <div class="pro-list">
                            <h4>‚úì Avantages</h4>
                            <ul>
                                <li>Simplicit√© administrative maximale</li>
                                <li>Pas de comptabilit√© d√©taill√©e</li>
                                <li>Cotisations sociales r√©duites</li>
                                <li>Abattement forfaitaire de 87%</li>
                            </ul>
                        </div>
                        <div class="con-list">
                            <h4>‚úó Inconv√©nients</h4>
                            <ul>
                                <li>Plafond CA : 91 900‚Ç¨</li>
                                <li>Pas de d√©duction des charges r√©elles</li>
                                <li>Pas d'amortissements</li>
                                <li>Moins adapt√© si charges √©lev√©es</li>
                            </ul>
                        </div>
                    </div>
                </div>
                `;
            } else {
                html += `
                <div class="comparison-card" style="opacity: 0.6;">
                    <div class="regime-header">
                        <h3>Micro-BA (Micro-B√©n√©fices Agricoles)</h3>
                    </div>
                    <div class="warning-box">
                        <h4>‚ö†Ô∏è Non √©ligible</h4>
                        <p>Votre chiffre d'affaires (${formatNumber(microBA.ca)}‚Ç¨) d√©passe le plafond du r√©gime Micro-BA (91 900‚Ç¨).</p>
                    </div>
                </div>
                `;
            }
            
            // R√©el Simplifi√© Card
            html += `
            <div class="comparison-card">
                <div class="regime-header">
                    <h3>R√©el Simplifi√©</h3>
                    ${bestChoice === 'R√©el Simplifi√©' ? '<span class="best-choice">üèÜ Meilleur choix</span>' : ''}
                </div>
                
                <div class="metrics-grid">
                    <div class="metric-box">
                        <div class="metric-label">B√©n√©fice agricole</div>
                        <div class="metric-value">${formatNumber(reelSimplifie.benefice)}‚Ç¨</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label">Imp√¥t sur le revenu</div>
                        <div class="metric-value">${formatNumber(reelSimplifie.impotRevenu)}‚Ç¨</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label">Cotisations MSA</div>
                        <div class="metric-value">${formatNumber(reelSimplifie.cotisationsSociales)}‚Ç¨</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label">Total charges fiscales/sociales</div>
                        <div class="metric-value">${formatNumber(reelSimplifie.totalTax)}‚Ç¨</div>
                    </div>
                </div>
                
                <div class="pros-cons">
                    <div class="pro-list">
                        <h4>‚úì Avantages</h4>
                        <ul>
                            <li>D√©duction des charges r√©elles</li>
                            <li>Amortissements du mat√©riel</li>
                            <li>Comptabilit√© simplifi√©e</li>
                            <li>Adapt√© moyennes exploitations</li>
                        </ul>
                    </div>
                    <div class="con-list">
                        <h4>‚úó Inconv√©nients</h4>
                        <ul>
                            <li>Obligations comptables</li>
                            <li>D√©clarations plus complexes</li>
                            <li>Co√ªt expertise comptable</li>
                            <li>Cotisations sociales sur b√©n√©fice</li>
                        </ul>
                    </div>
                </div>
            </div>
            `;
            
            // R√©el Normal Card
            html += `
            <div class="comparison-card">
                <div class="regime-header">
                    <h3>R√©el Normal</h3>
                    ${bestChoice === 'R√©el Normal' ? '<span class="best-choice">üèÜ Meilleur choix</span>' : ''}
                </div>
                
                <div class="metrics-grid">
                    <div class="metric-box">
                        <div class="metric-label">B√©n√©fice agricole</div>
                        <div class="metric-value">${formatNumber(reelNormal.benefice)}‚Ç¨</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label">Imp√¥t sur le revenu</div>
                        <div class="metric-value">${formatNumber(reelNormal.impotRevenu)}‚Ç¨</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label">Cotisations MSA</div>
                        <div class="metric-value">${formatNumber(reelNormal.cotisationsSociales)}‚Ç¨</div>
                    </div>
                    <div class="metric-box">
                        <div class="metric-label">Total avec comptabilit√©</div>
                        <div class="metric-value">${formatNumber(reelNormal.totalTax + reelNormal.fraisComptabilite)}‚Ç¨</div>
                    </div>
                </div>
                
                <div class="warning-box">
                    <h4>üí° √Ä savoir</h4>
                    <p>Frais de comptabilit√© estim√©s : <strong>${formatNumber(reelNormal.fraisComptabilite)}‚Ç¨/an</strong> (expert-comptable sp√©cialis√©)</p>
                </div>
                
                <div class="pros-cons">
                    <div class="pro-list">
                        <h4>‚úì Avantages</h4>
                        <ul>
                            <li>D√©duction maximale charges</li>
                            <li>Gestion optimale stocks</li>
                            <li>Grandes exploitations</li>
                            <li>Image professionnelle</li>
                        </ul>
                    </div>
                    <div class="con-list">
                        <h4>‚úó Inconv√©nients</h4>
                        <ul>
                            <li>Comptabilit√© tr√®s d√©taill√©e</li>
                            <li>Co√ªts comptables √©lev√©s</li>
                            <li>D√©clarations complexes</li>
                            <li>Bilan complet obligatoire</li>
                        </ul>
                    </div>
                </div>
            </div>
            `;
            
            // Summary Card
            const savings = Math.max(microBA.eligible ? microBA.totalTax : Infinity, 
                                    reelSimplifie.totalTax, 
                                    reelNormal.totalTax + reelNormal.fraisComptabilite);
            const worstCase = Math.min(microBA.eligible ? microBA.totalTax : -Infinity, 
                                       reelSimplifie.totalTax, 
                                       reelNormal.totalTax + reelNormal.fraisComptabilite);
            
            html += `
            <div class="summary-card">
                <h2>üí° Recommandation personnalis√©e</h2>
                <p style="font-size: 1.1rem; opacity: 0.95;">
                    Selon votre situation, le r√©gime <strong>${bestChoice}</strong> est le plus avantageux pour vous. 
                    Vous pourriez √©conomiser jusqu'√† <strong>${formatNumber(Math.abs(savings - worstCase))}‚Ç¨</strong> 
                    par rapport au r√©gime le moins favorable.
                </p>
                
                <div class="summary-grid">
                    <div class="summary-item">
                        <h4>Meilleur r√©gime</h4>
                        <div class="value">${bestChoice}</div>
                    </div>
                    <div class="summary-item">
                        <h4>√âconomie potentielle</h4>
                        <div class="value">${formatNumber(Math.abs(savings - worstCase))}‚Ç¨</div>
                    </div>
                    <div class="summary-item">
                        <h4>Taux effectif minimal</h4>
                        <div class="value">${((savings / parseFloat(document.getElementById('ca').value)) * 100).toFixed(1)}%</div>
                    </div>
                </div>
            </div>
            `;
            
            resultsDiv.innerHTML = html;
        }
        
        function formatNumber(num) {
            return Math.round(num).toLocaleString('fr-FR');
        }
        
        // Calcul initial au chargement
        window.onload = function() {
            calculate();
        };
    </script>
</body>
</html>